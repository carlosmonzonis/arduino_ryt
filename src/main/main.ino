/**
   @file main.ino
   @author Carlos Monzonis Marti (carlosmonzonis@outlook.es)
   @brief
   @version 0.1
   @date 2021-12-15

   @copyright Copyright (c) 2021

*/

/*
  .####.##....##..######..##.......##.....##.########..########..######.
  ..##..###...##.##....##.##.......##.....##.##.....##.##.......##....##
  ..##..####..##.##.......##.......##.....##.##.....##.##.......##......
  ..##..##.##.##.##.......##.......##.....##.##.....##.######....######.
  ..##..##..####.##.......##.......##.....##.##.....##.##.............##
  ..##..##...###.##....##.##.......##.....##.##.....##.##.......##....##
  .####.##....##..######..########..#######..########..########..######.
*/
#include "reloj.h"
#include "termometro.h"

/*
  .########..########.########.####.##....##.########..######.
  .##.....##.##.......##........##..###...##.##.......##....##
  .##.....##.##.......##........##..####..##.##.......##......
  .##.....##.######...######....##..##.##.##.######....######.
  .##.....##.##.......##........##..##..####.##.............##
  .##.....##.##.......##........##..##...###.##.......##....##
  .########..########.##.......####.##....##.########..######.
*/


/*
  ..######..########.########.##.....##.########.
  .##....##.##..........##....##.....##.##.....##
  .##.......##..........##....##.....##.##.....##
  ..######..######......##....##.....##.########.
  .......##.##..........##....##.....##.##.......
  .##....##.##..........##....##.....##.##.......
  ..######..########....##.....#######..##.......
*/

/**
   @brief inicializador para las ocasiones que se quede sin bateria el reloj interno del aparato y el aparato.
   Solo se tendrá que llamar una vez. Se tendra que llamar siempre que el arduino este conectado al pc.

*/
void setup() {
  Serial.begin(9600);
  reloj::check_status();
  reloj::set_time();
  termometro::check_status();
}

/**
   @brief inicializador general.
   Se llamará siempre que se reinicie normalmente el aparato.

*/
// void setup(){
// reloj::check_status();
// termometro::check_status();
// }


/*
  .##........#######...#######..########.
  .##.......##.....##.##.....##.##.....##
  .##.......##.....##.##.....##.##.....##
  .##.......##.....##.##.....##.########.
  .##.......##.....##.##.....##.##.......
  .##.......##.....##.##.....##.##.......
  .########..#######...#######..##.......
*/

void loop() {
  reloj::print_time(reloj::get_time());
  termometro::print_measurement(termometro::get_temperature(), termometro::get_humidity());
  delay(1000);
}
